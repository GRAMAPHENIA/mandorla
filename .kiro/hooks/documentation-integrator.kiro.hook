{
  "enabled": true,
  "name": "Integrador de Documentación",
  "description": "Hook que integra y organiza toda la documentación generada automáticamente, creando índices, enlaces cruzados y manteniendo la coherencia del sistema de documentación",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "docs/**/*.md",
      "src/**/*.docs.md",
      "src/**/*.api.md"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "Integra y organiza automáticamente la documentación generada, manteniendo un sistema coherente y navegable:\n\n## 1. Análisis del Sistema de Documentación\n\n**Inventariar documentación existente:**\n- Documentación de componentes (*.docs.md)\n- Documentación de APIs (*.api.md)\n- Diagramas de arquitectura\n- Guías de desarrollo\n- Documentación de módulos\n\n**Detectar cambios:**\n- Nuevos archivos de documentación\n- Documentación actualizada\n- Archivos eliminados o movidos\n- Cambios en estructura de carpetas\n\n## 2. Estructura del Sistema de Documentación\n\n### Organización Principal\n```\ndocs/\n├── README.md                    # Índice principal\n├── getting-started/\n│   ├── installation.md\n│   ├── development.md\n│   └── architecture-overview.md\n├── components/\n│   ├── README.md               # Índice de componentes\n│   ├── ui/\n│   │   ├── button.docs.md\n│   │   └── input.docs.md\n│   ├── products/\n│   │   └── product-card.docs.md\n│   └── cart/\n│       └── cart-item.docs.md\n├── apis/\n│   ├── README.md               # Índice de APIs\n│   ├── products.api.md\n│   ├── cart.api.md\n│   └── orders.api.md\n├── architecture/\n│   ├── README.md               # Índice de arquitectura\n│   ├── overview.md\n│   ├── modules/\n│   └── patterns/\n├── guides/\n│   ├── development.md\n│   ├── testing.md\n│   └── deployment.md\n└── examples/\n    ├── common-patterns.md\n    └── integration-examples.md\n```\n\n## 3. Generación de Índices Automáticos\n\n### Índice Principal (docs/README.md)\n```markdown\n# Documentación del Proyecto Mandorla\n\n## 🏗️ Arquitectura\n- [Visión General](./architecture/overview.md)\n- [Módulos del Sistema](./architecture/modules/README.md)\n- [Patrones de Diseño](./architecture/patterns/README.md)\n\n## 🧩 Componentes\n- [Componentes UI](./components/ui/README.md)\n- [Componentes de Productos](./components/products/README.md)\n- [Componentes de Carrito](./components/cart/README.md)\n\n## 🔌 APIs\n- [API de Productos](./apis/products.api.md)\n- [API de Carrito](./apis/cart.api.md)\n- [API de Pedidos](./apis/orders.api.md)\n\n## 📚 Guías\n- [Guía de Desarrollo](./guides/development.md)\n- [Guía de Testing](./guides/testing.md)\n- [Guía de Deployment](./guides/deployment.md)\n\n## 🎯 Ejemplos\n- [Patrones Comunes](./examples/common-patterns.md)\n- [Ejemplos de Integración](./examples/integration-examples.md)\n\n---\n*Documentación generada automáticamente - Última actualización: [fecha]*\n```\n\n### Índice de Componentes (docs/components/README.md)\n```markdown\n# Componentes del Sistema\n\n## Componentes UI Base\n\n### Formularios\n- [Button](./ui/button.docs.md) - Botón reutilizable con variantes\n- [Input](./ui/input.docs.md) - Campo de entrada con validación\n- [Select](./ui/select.docs.md) - Selector desplegable\n\n### Layout\n- [Card](./ui/card.docs.md) - Contenedor de contenido\n- [Modal](./ui/modal.docs.md) - Ventana modal\n\n## Componentes de Dominio\n\n### Productos\n- [ProductCard](./products/product-card.docs.md) - Tarjeta de producto\n- [ProductList](./products/product-list.docs.md) - Lista de productos\n- [ProductFilter](./products/product-filter.docs.md) - Filtros de búsqueda\n\n### Carrito\n- [CartItem](./cart/cart-item.docs.md) - Item del carrito\n- [CartSummary](./cart/cart-summary.docs.md) - Resumen del carrito\n\n## Estadísticas\n- **Total de componentes**: [número]\n- **Componentes documentados**: [número]\n- **Cobertura de documentación**: [porcentaje]%\n\n---\n*Índice generado automáticamente*\n```\n\n### Índice de APIs (docs/apis/README.md)\n```markdown\n# APIs del Sistema\n\n## Endpoints Principales\n\n### Productos\n- `GET /api/products` - [Listar productos](./products.api.md#listar-productos)\n- `GET /api/products/[id]` - [Obtener producto](./products.api.md#obtener-producto)\n- `POST /api/products/search` - [Buscar productos](./products.api.md#buscar-productos)\n\n### Carrito\n- `GET /api/cart` - [Obtener carrito](./cart.api.md#obtener-carrito)\n- `POST /api/cart/items` - [Agregar item](./cart.api.md#agregar-item)\n- `PUT /api/cart/items/[id]` - [Actualizar item](./cart.api.md#actualizar-item)\n- `DELETE /api/cart/items/[id]` - [Eliminar item](./cart.api.md#eliminar-item)\n\n### Pedidos\n- `POST /api/orders` - [Crear pedido](./orders.api.md#crear-pedido)\n- `GET /api/orders/[id]` - [Obtener pedido](./orders.api.md#obtener-pedido)\n\n## Esquemas de Datos\n\n### Tipos Comunes\n```typescript\ninterface ApiResponse<T> {\n  success: boolean\n  data?: T\n  error?: {\n    code: string\n    message: string\n    details?: any\n  }\n}\n```\n\n## Códigos de Estado\n- `200` - Éxito\n- `201` - Creado\n- `400` - Solicitud inválida\n- `404` - No encontrado\n- `500` - Error interno\n\n---\n*Documentación de API generada automáticamente*\n```\n\n## 4. Enlaces Cruzados Automáticos\n\n### Detección de Referencias\n**Buscar menciones de:**\n- Componentes en documentación de APIs\n- APIs en documentación de componentes\n- Módulos en diagramas de arquitectura\n- Patrones en guías de desarrollo\n\n### Generación de Enlaces\n```markdown\n<!-- Enlaces automáticos generados -->\n## Componentes Relacionados\n- [ProductCard](../components/products/product-card.docs.md)\n- [CartItem](../components/cart/cart-item.docs.md)\n\n## APIs Utilizadas\n- [API de Productos](../apis/products.api.md)\n- [API de Carrito](../apis/cart.api.md)\n\n## Diagramas\n- [Flujo de Checkout](../architecture/flows/checkout-flow.md)\n```\n\n## 5. Validación de Consistencia\n\n### Verificar Enlaces\n- Enlaces internos funcionan correctamente\n- Referencias a archivos existentes\n- Anchors (#) apuntan a secciones válidas\n- Imágenes y diagramas están disponibles\n\n### Validar Contenido\n- Documentación está actualizada\n- Ejemplos de código compilan\n- Información de APIs es precisa\n- Diagramas reflejan la arquitectura actual\n\n### Detectar Problemas\n- Documentación huérfana (sin referencias)\n- Enlaces rotos\n- Información desactualizada\n- Duplicación de contenido\n\n## 6. Metadatos y Búsqueda\n\n### Generación de Metadatos\n```yaml\n---\ntitle: [Título del documento]\ncategory: [components/apis/architecture/guides]\ntags: [tag1, tag2, tag3]\nlastUpdated: [fecha ISO]\nauthor: Sistema de documentación automática\nversion: [versión]\nstatus: [stable/beta/deprecated]\nrelated:\n  - [documento-relacionado-1.md]\n  - [documento-relacionado-2.md]\n---\n```\n\n### Índice de Búsqueda\n```json\n{\n  \"documents\": [\n    {\n      \"path\": \"components/ui/button.docs.md\",\n      \"title\": \"Button Component\",\n      \"category\": \"components\",\n      \"tags\": [\"ui\", \"button\", \"form\"],\n      \"lastUpdated\": \"2024-01-15T10:30:00Z\",\n      \"excerpt\": \"Componente de botón reutilizable con múltiples variantes...\"\n    }\n  ]\n}\n```\n\n## 7. Generación de Sitio de Documentación\n\n### Configuración para Generadores\n**Preparar para:**\n- Docusaurus\n- GitBook\n- VitePress\n- Nextra\n\n### Estructura de Navegación\n```javascript\n// sidebars.js para Docusaurus\nmodule.exports = {\n  docs: [\n    {\n      type: 'category',\n      label: 'Arquitectura',\n      items: ['architecture/overview', 'architecture/modules']\n    },\n    {\n      type: 'category', \n      label: 'Componentes',\n      items: ['components/ui/button', 'components/products/product-card']\n    }\n  ]\n}\n```\n\n## 8. Mantenimiento Automático\n\n### Tareas de Limpieza\n- Eliminar documentación de componentes eliminados\n- Actualizar enlaces cuando se mueven archivos\n- Regenerar índices cuando cambia la estructura\n- Limpiar archivos temporales\n\n### Reportes de Calidad\n```markdown\n# Reporte de Calidad de Documentación\n\n## Estadísticas\n- **Archivos de documentación**: 45\n- **Enlaces verificados**: 123\n- **Enlaces rotos**: 2\n- **Cobertura de componentes**: 85%\n- **Cobertura de APIs**: 100%\n\n## Problemas Detectados\n- [ ] Enlace roto en components/ui/button.docs.md línea 23\n- [ ] Documentación faltante para ProductFilter component\n- [ ] Diagrama desactualizado en architecture/overview.md\n\n## Sugerencias\n- Agregar más ejemplos de uso en APIs\n- Crear guía de migración para cambios recientes\n- Actualizar screenshots en guías de usuario\n```\n\n## Instrucciones de Ejecución\n\n1. **Escanear** todos los archivos de documentación\n2. **Analizar** estructura y contenido\n3. **Generar** índices automáticos\n4. **Crear** enlaces cruzados\n5. **Validar** consistencia y enlaces\n6. **Actualizar** metadatos\n7. **Generar** reportes de calidad\n\n**Formato de Respuesta:**\n- 📚 **Documentos procesados**: [número de archivos]\n- 📋 **Índices generados**: [lista de índices creados]\n- 🔗 **Enlaces cruzados**: [número de enlaces generados]\n- ✅ **Enlaces válidos**: [número/total]\n- ❌ **Enlaces rotos**: [número y ubicaciones]\n- 📊 **Cobertura**: [porcentaje de documentación]\n- 🔧 **Archivos actualizados**: [lista de archivos modificados]\n- ⚠️ **Problemas detectados**: [lista de problemas]\n- 💡 **Sugerencias**: [mejoras recomendadas]"
  }
}